<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>IG Web SDK</title>
</head>
<body>
    <script src="./ig-web-sdk.js"></script>
  <div id="provided-container-id"></div>
  <script>
    window.startSDK = function (configJson) {
      const config = configJson;
          console.log("Calling IGWebSDK.init");

      IGWebSDK.init({
        videoToken: config.videoToken,
        age: config.age,
        gender: config.gender,
        noDesign: true,
        buttonBgColor: config.buttonBgColor || "2e8ece",
        buttonTextColor: config.buttonTextColor || "ffffff",
        containerId: "provided-container-id"

      });
    };
  </script>

  <script>
  function sendMessageToFlutter(data) {
    if (window.flutter_inappwebview && window.flutter_inappwebview.postMessage) {
      window.flutter_inappwebview.postMessage(data);
    } else {
      console.warn("JS bridge not ready");
    }
  }
      window.addEventListener("load", () => {
        console.log("Loaded");
      window.startSDK({
        videoToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpbnN0aXR1dGlvbklkIjoiNjc1ZWI5NmY1YjE0ZjAwOWFlMWQyYjBjIiwiaWF0IjoxNzUxOTExMDYwLCJleHAiOjE3NTE5MTM3NjB9.0H1q5bFfR-v0bAzNE7VEaf5OMUHB91Lr4rOFmbRXYBg",
        age: 30,
        gender: "male",
        buttonBgColor: "2e8ece",
        buttonTextColor: "ffffff"
      });
    });

  // Example usage after page load:
  window.addEventListener("load", () => {
    sendMessageToFlutter("SDK page loaded");

    // If you want to auto-start SDK with Flutter config, that comes from Flutter via runJavaScript
    // So nothing else needed here for now
  });
</script>
</body>
</html>
